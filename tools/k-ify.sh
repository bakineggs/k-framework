#/bin/bash
if [ $# -eq 0 ]; then 
  FILE="/dev/stdin"
else
  FILE="$1"
fi
cat "$FILE" | sed '
s/\([ \t]\)mb\([ \t]*\)\([[][^][]\+[]][ \t]*:[ \t]\+\)\?\(rule\|context\|configuration\)\([ \t]*\)/\1\4\2\3\5/g;
s/[ \t]\+:[ \t]\+KSentence\([ \t]*\([[]\)[ \t]*metadata[ \t]\+"\([^"]\+\)"[^]]*\([]]\)\)\?[ \t]\+\./ \2\3\4/g;
s/<\(\/\?\)[ \t]\+\([^ ]\+\)[ \t]\+\(\([*]\)[ \t]\+\)\?>/<\1\2\4>/g;
s/\[\([^][]\+\) => \([^][]\+\)]/(\1 => \2)/g;
s/\.\.\.</<_/g;
s/>\.\.\./_>/g;
s/\([^`][]{}()[, ]\)?\([]{}()[, ]\)/\1 _ \2/g;
s/metadata[ \t]\+"\([^"]*\)"/\1 /g;
s/op.*:[ \t]\+CellLabel[ \t]\+.//g
' 
